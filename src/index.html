<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Simple User-Agent Analytics Tool</title>
    <style>
      .navLink {
        border-bottom: 2px solid transparent;
      }
      .navLink:active,
      .navLink:hover {
        border-bottom: 2px solid #fff;
      }
    </style>
    <!-- tailwind css -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <!-- chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <header class="bg-slate-800 text-white p-5">
      <div class="container mx-auto">
        <h1 class="text-xl md:text-3xl font-bold text-center">
          User-Agents Analytics
        </h1>
      </div>
    </header>
    <main class="min-h-[calc(100dvh-72px)] grid place-items-center">
      <div class="container max-w-3xl mx-auto p-5">
        <h2 class="text-xl font-bold text-center mb-5">
          A Simple User-Agent Analytics
        </h2>
        <canvas id="userAgentsChart"></canvas>
      </div>
    </main>

    <script>
      fetch("/api/analytics/user-agents")
        .then((res) => res.json())
        .then((data) => {
          console.log(data);

          let labels = [];
          let values = [];
          if (typeof data === "object") {
            labels = Object.keys(data);
            values = Object.values(data);
          }
          const ctx = document.getElementById("userAgentsChart");

          new Chart(ctx, {
            type: "bar",
            data: {
              labels: labels,
              datasets: [
                {
                  label: "User-Agents Analytics",
                  data: values,
                  borderWidth: 1,
                },
              ],
            },
            options: {
              scales: {
                y: {
                  beginAtZero: true,
                },
              },
            },
          });
        });
    </script>
  </body>
</html>
